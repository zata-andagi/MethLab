<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>MATHLAB - Math Learning for All Ages</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base */
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif;}
        :root{
            --primary:#004AAD;
            --secondary:#4f8bdc;
            --accent:#FF9E1B;
            --light:#f5f7fa;
            --dark:#333333;
        }
        body{ background-color:var(--light); color:var(--dark); line-height:1.6;}
        .container{ max-width:1200px; margin:0 auto; padding:0 20px;}

        /* Header */
        header{ background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%); color:white; padding:15px 0; position:sticky; top:0; z-index:100; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
        .header-content{ display:flex; justify-content:space-between; align-items:center; gap:15px;}
        .logo{ display:flex; align-items:center; gap:10px; position:relative;}
        .logo i{ font-size:2rem;}
        .logo h1{ font-size:1.8rem; font-weight:700;}
        nav ul{ display:flex; list-style:none; gap:25px;}
        nav a{ color:white; text-decoration:none; font-weight:500; padding:5px 10px; border-radius:4px; transition:all .3s;}
        nav a:hover{ background-color: rgba(255,255,255,0.15); }
        .auth-buttons{ display:flex; gap:12px; align-items:center; position:relative;}

        /* Buttons */
        .btn{ padding:10px 18px; border-radius:50px; font-weight:500; cursor:pointer; border:none; transition:all .25s; display:inline-flex; align-items:center; gap:8px; position:relative; overflow:hidden; background:transparent; color:inherit;}
        .btn-primary{ background-color:var(--primary); color:white;}
        .btn-secondary{ background-color:var(--secondary); color:white;}
        .btn-outline{ background-color:transparent; color:white; border:2px solid rgba(255,255,255,0.18);}
        .btn-accent{ background-color:var(--accent); color:white;}
        .btn:hover{ transform:translateY(-3px); box-shadow:0 6px 14px rgba(0,0,0,0.12); }
        .btn::after{ content:''; position:absolute; top:50%; left:50%; width:0; height:0; border-radius:50%; background:rgba(255,255,255,0.18); transform:translate(-50%,-50%); transition:width .6s, height .6s;}
        .btn:hover::after{ width:250px; height:250px; }

        /* Hero */
        .hero{ padding:70px 0; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600" preserveAspectRatio="none"><path fill="%234f8bdc" fill-opacity="0.08" d="M0,0 L1200,0 L1200,600 L0,600 Z"/><path fill="%23004AAD" fill-opacity="0.06" d="M0,0 Q600,300 1200,0 L1200,600 L0,600 Z"/></svg>') no-repeat center center; background-size:cover;}
        .hero-content{ display:flex; align-items:center; gap:40px;}
        .hero-text{ flex:1; }
        .hero-text h2{ font-size:2.6rem; margin-bottom:18px; color:var(--primary);}
        .hero-text p{ font-size:1.1rem; margin-bottom:20px; color:var(--dark);}
        .hero-buttons{ display:flex; gap:12px; flex-wrap:wrap;}
        .hero-image{ flex:1; text-align:center; }
        .hero-image img{ max-width:100%; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.12); }

        /* Sections */
        .features{ padding:60px 0; background-color:white;}
        .section-title{ text-align:center; margin-bottom:40px;}
        .section-title h2{ font-size:2rem; color:var(--primary); margin-bottom:8px;}
        .section-title p{ color:var(--dark); max-width:700px; margin:0 auto;}
        .features-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:22px;}
        .feature-card{ background-color:var(--light); border-radius:12px; padding:22px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.05); transition:all .25s; position:relative; overflow:hidden;}
        .feature-icon{ width:64px; height:64px; background-color:var(--secondary); color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 14px; font-size:1.5rem;}
        .feature-card h3{ font-size:1.25rem; margin-bottom:10px; color:var(--primary);}

        /* Age groups */
        .age-groups{ padding:60px 0; background:linear-gradient(135deg, rgba(0,74,173,0.03) 0%, rgba(79,139,220,0.03) 100%);}
        .age-cards{ display:flex; flex-wrap:wrap; justify-content:center; gap:18px;}
        .age-card{ background:white; border-radius:12px; width:250px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.08); transition:all .25s; position:relative;}
        .age-card-header{ background-color:var(--primary); color:white; padding:18px; text-align:center;}
        .age-card-body{ padding:16px; text-align:center;}
        .age-card-body ul{ text-align:left; padding-left:18px; margin-top:12px;}
        .age-card-body li{ margin-bottom:8px; }

        /* Quiz Section */
        .quiz-section{ padding:40px 0; background-color:white; border-radius:12px; margin-top:30px; box-shadow:0 6px 20px rgba(0,0,0,0.06);}
        .quiz-container{ max-width:900px; margin:0 auto; padding:20px; display:grid; gap:16px;}
        .quiz-header{ display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;}
        .quiz-card{ background:var(--light); padding:18px; border-radius:10px; display:flex; flex-direction:column; gap:12px;}
        .question{ font-size:1.2rem; font-weight:600; color:var(--primary);}
        .choices{ display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:12px;}
        .choice-btn{ padding:12px; border-radius:8px; border:1px solid #ddd; background:white; cursor:pointer; font-weight:600; transition:all .18s; }
        .choice-btn:hover{ transform:translateY(-3px); box-shadow:0 8px 18px rgba(0,0,0,0.06);}
        .choice-btn.correct{ border-color:#23d160; background:rgba(35,209,96,0.06); }
        .choice-btn.wrong{ border-color:#ff3860; background:rgba(255,56,96,0.06); }
        .quiz-footer{ display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;}
        .progress{ height:10px; background:#eee; border-radius:10px; overflow:hidden; width:100%;}
        .progress-bar{ height:100%; width:0%; background:linear-gradient(90deg,var(--primary),var(--secondary)); transition:width .25s;}
        .score{ font-weight:700; color:var(--dark); }

        /* CTA */
        .cta{ padding:50px 0; background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%); color:white; text-align:center;}
        .cta h2{ font-size:1.8rem; margin-bottom:10px;}
        .cta p{ max-width:700px; margin:0 auto 18px; font-size:1.05rem;}

        /* Form */
        .form-container{ background:white; border-radius:12px; padding:24px; max-width:540px; margin:28px auto; box-shadow:0 5px 20px rgba(0,0,0,0.08);}
        .form-group{ margin-bottom:14px;}
        label{ display:block; margin-bottom:8px; font-weight:600; color:var(--dark);}
        input, select, textarea{ width:100%; padding:12px 14px; border:1px solid #ddd; border-radius:8px; font-size:1rem; transition:all .18s;}
        input:focus, textarea:focus{ border-color:var(--secondary); box-shadow:0 0 0 4px rgba(79,139,220,0.12); outline:none;}

        /* Footer */
        footer{ background-color:var(--dark); color:white; padding:40px 0 20px;}
        .footer-content{ display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:24px; margin-bottom:28px;}
        .footer-column h3{ font-size:1.1rem; margin-bottom:12px; color:var(--secondary);}
        .footer-column ul{ list-style:none;}
        .footer-column a{ color:#ccc; text-decoration:none;}
        .social-links{ display:flex; gap:12px; margin-top:10px;}
        .social-links a{ display:flex; align-items:center; justify-content:center; width:40px; height:40px; background:rgba(255,255,255,0.06); border-radius:50%; color:white; }

        .copyright{ text-align:center; padding-top:12px; border-top:1px solid rgba(255,255,255,0.06); font-size:0.9rem; color:#aaa;}

        /* Small UI elements */
        .notification-badge{ position:absolute; top:-8px; right:-8px; background-color:var(--accent); color:white; border-radius:50%; width:20px; height:20px; display:flex; align-items:center; justify-content:center; font-size:0.7rem; font-weight:700; animation:pulse 2s infinite;}
        @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}

        /* Back to top */
        .back-to-top{ position:fixed; bottom:28px; right:28px; width:50px; height:50px; background:var(--primary); color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.2rem; cursor:pointer; opacity:0; visibility:hidden; transition:all .3s; z-index:99; box-shadow:0 4px 18px rgba(0,0,0,0.18);}
        .back-to-top.visible{ opacity:1; visibility:visible;}
        .back-to-top:hover{ background:var(--secondary); transform:translateY(-3px); }

        /* Loader */
        .loader{ display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.92); z-index:9999; justify-content:center; align-items:center; flex-direction:column;}
        .loader.active{ display:flex;}
        .loader-spinner{ width:50px; height:50px; border:5px solid var(--light); border-top:5px solid var(--primary); border-radius:50%; animation:spin 1s linear infinite; margin-bottom:14px;}
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}

        /* Toast */
        .toast{ position:fixed; right:20px; bottom:20px; background:#222; color:white; padding:12px 16px; border-radius:8px; box-shadow:0 6px 24px rgba(0,0,0,0.25); opacity:0; transform:translateY(10px); transition:all .28s; z-index:2000;}
        .toast.show{ opacity:1; transform:translateY(0); }

        /* Responsive */
        @media (max-width:920px){ .hero-content{ flex-direction:column; text-align:center; } .header-content{ flex-direction:column; gap:12px; } nav ul{ gap:12px; flex-wrap:wrap; justify-content:center; } }
        @media (max-width:576px){ .auth-buttons{ flex-direction:column; width:100%; } .btn{ width:100%; justify-content:center; } .form-buttons{ flex-direction:column; } .choices{ grid-template-columns:repeat(2,1fr); } }
    </style>
</head>
<body>
    <!-- Scroll progress -->
    <div class="scroll-progress" style="position:fixed;top:0;left:0;height:4px;background:linear-gradient(to right,var(--primary),var(--secondary));width:0;z-index:1000;"></div>

    <!-- Loader -->
    <div class="loader" id="pageLoader" aria-hidden="true">
        <div class="loader-spinner" role="status" aria-hidden="true"></div>
        <p class="loader-text" style="color:var(--primary); font-weight:600;">Loading content...</p>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo" aria-label="MATHLAB logo">
                    <i class="fas fa-square-root-alt" aria-hidden="true"></i>
                    <h1>MATHLAB</h1>
                    <span class="notification-badge" aria-hidden="true">3</span>
                </div>

                <nav aria-label="Main navigation">
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#materials">Materials</a></li>
                        <li><a href="#practice">Practice</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>

                <div class="auth-buttons">
                    <button class="btn btn-outline" id="signInBtn" aria-label="Sign in"><i class="fas fa-sign-in-alt" aria-hidden="true"></i> Sign In</button>
                    <button class="btn btn-accent" id="signUpBtn" aria-label="Sign up"><i class="fas fa-user-plus" aria-hidden="true"></i> Sign Up</button>
                    <span class="notification-badge" style="top:8px;right:-10px;" aria-hidden="true">1</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero -->
    <section class="hero" aria-labelledby="hero-title">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h2 id="hero-title">Make Math Fun Again</h2>
                    <p>MATHLAB is a learning platform that offers interactive math lessons for all ages. We turn scary math into friendly, bite-sized challenges.</p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary" id="startLearningBtn"><i class="fas fa-play-circle"></i> Start Learning</button>
                        <button class="btn btn-secondary" id="learnMoreBtn"><i class="fas fa-info-circle"></i> Learn More</button>
                    </div>
                </div>
                <div class="hero-image" aria-hidden="true">
                    <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='480' height='320' viewBox='0 0 480 320'><rect width='480' height='320' fill='%23f5f7fa' rx='12' ry='12'/><circle cx='240' cy='140' r='80' fill='%234f8bdc' fill-opacity='0.12'/><path d='M220,110 L260,110 L260,170 L220,170 Z' fill='%23004AAD' fill-opacity='0.6'/><circle cx='240' cy='140' r='40' fill='%23FF9E1B'/><text x='240' y='145' font-family='Arial' font-size='26' fill='white' text-anchor='middle'>π</text><text x='240' y='280' font-family='Arial' font-size='14' fill='%23004AAD' text-anchor='middle'>Mathematics for Every Age</text></svg>" alt="Illustration of math symbol and learning">
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="features" id="materials" aria-labelledby="features-title">
        <div class="container">
            <div class="section-title">
                <h2 id="features-title">Why Choose MATHLAB?</h2>
                <p>We provide a different learning experience — interactive, engaging, and trackable.</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-gamepad"></i></div>
                    <h3>Interactive Lessons</h3>
                    <p>Learn math through playful, interactive activities that make concepts stick.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-users"></i></div>
                    <h3>For Every Age</h3>
                    <p>Content tailored for different age groups: kids, teens, and adults.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                    <h3>Progress Tracking</h3>
                    <p>Monitor learning progress with clear metrics and achievements.</p>
                </div>
            </div>

            <!-- Quiz Section (Interactive) -->
            <div class="quiz-section" id="practice" aria-labelledby="quiz-title" style="margin-top:28px;">
                <div class="quiz-container">
                    <div class="quiz-header">
                        <div>
                            <h3 id="quiz-title" style="margin-bottom:6px;">Quick Math Quiz</h3>
                            <p style="color:#555;">Basic arithmetic quiz — practice addition, subtraction, and multiplication. 8 questions total.</p>
                        </div>
                        <div style="display:flex;gap:10px;align-items:center;">
                            <div class="score" id="scoreDisplay">Score: 0</div>
                            <button class="btn btn-outline" id="restartQuizBtn" title="Restart quiz">Restart</button>
                        </div>
                    </div>

                    <div class="quiz-card" role="region" aria-live="polite">
                        <div class="question" id="questionText">Press Start to begin the quiz.</div>
                        <div class="choices" id="choicesContainer" aria-label="Answer choices" role="group"></div>
                        <div class="quiz-footer" style="margin-top:6px;">
                            <div style="width:60%;">
                                <div class="progress" aria-hidden="true">
                                    <div class="progress-bar" id="progressBar" style="width:0%"></div>
                                </div>
                            </div>
                            <div style="min-width:140px; text-align:right;">
                                <button class="btn btn-primary" id="nextBtn" disabled>Next</button>
                                <button class="btn btn-secondary" id="startBtn">Start</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Quiz Section -->
        </div>
    </section>

    <!-- Age groups -->
    <section class="age-groups" aria-labelledby="age-title">
        <div class="container">
            <div class="section-title">
                <h2 id="age-title">Content for Every Level</h2>
                <p>We provide curated lessons to match learners' ages and abilities.</p>
            </div>

            <div class="age-cards">
                <div class="age-card">
                    <div class="age-card-header"><h3>Ages 5-10</h3></div>
                    <div class="age-card-body">
                        <p>Fun Basics</p>
                        <ul>
                            <li>Counting</li>
                            <li>Shapes</li>
                            <li>Simple Logic</li>
                            <li>Math Games</li>
                        </ul>
                    </div>
                </div>

                <div class="age-card">
                    <div class="age-card-header"><h3>Ages 11-15</h3></div>
                    <div class="age-card-body">
                        <p>Intermediate Math</p>
                        <ul>
                            <li>Basic Algebra</li>
                            <li>Geometry</li>
                            <li>Introductory Statistics</li>
                            <li>Problem Solving</li>
                        </ul>
                    </div>
                </div>

                <div class="age-card">
                    <div class="age-card-header"><h3>Ages 16+</h3></div>
                    <div class="age-card-body">
                        <p>Advanced Topics</p>
                        <ul>
                            <li>Calculus</li>
                            <li>Trigonometry</li>
                            <li>Advanced Algebra</li>
                            <li>Applied Mathematics</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta" aria-labelledby="cta-title">
        <div class="container">
            <h2 id="cta-title">Ready to Start Your Math Journey?</h2>
            <p>Join thousands of learners who made math less intimidating with MATHLAB.</p>
            <button class="btn btn-accent" id="signupCtaBtn"><i class="fas fa-rocket"></i> Sign Up Now</button>
        </div>
    </section>

    <!-- Contact Form -->
    <section class="features" id="contact" aria-labelledby="contact-title">
        <div class="container">
            <div class="section-title">
                <h2 id="contact-title">Contact Us</h2>
                <p>If you have questions or suggestions, send us a message.</p>
            </div>

            <div class="form-container" aria-labelledby="form-title">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" placeholder="Enter your full name" aria-required="true">
                    <div class="error-message" style="color:#ff3860;display:none;">Full name is required</div>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Enter your email" aria-required="true">
                    <div class="error-message" style="color:#ff3860;display:none;">Please enter a valid email</div>
                </div>

                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" rows="5" placeholder="Write your message here" aria-required="true"></textarea>
                    <div class="error-message" style="color:#ff3860;display:none;">Message cannot be empty</div>
                </div>

                <div style="display:flex;gap:12px;justify-content:center;">
                    <button class="btn btn-primary" id="submitContactBtn"><i class="fas fa-paper-plane"></i> Submit</button>
                    <button class="btn btn-outline" id="cancelContactBtn" style="color:#333;border-color:#ddd;"><i class="fas fa-times"></i> Cancel</button>
                    <button class="btn btn-secondary" id="helpContactBtn"><i class="fas fa-question-circle"></i> Help</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer aria-labelledby="footer-title">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>MATHLAB</h3>
                    <p>An interactive math learning platform for all ages.</p>
                    <div class="social-links" aria-hidden="true">
                        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#materials">Learning Materials</a></li>
                        <li><a href="#practice">Practice</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> info@mathlab.id</li>
                        <li><i class="fas fa-phone"></i> +62 21 1234 5678</li>
                        <li><i class="fas fa-map-marker-alt"></i> Jakarta, Indonesia</li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2025 MATHLAB - Moch. Arkayeza - X PPLG 3. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to top -->
    <div class="back-to-top" id="backToTop" aria-label="Back to top"><i class="fas fa-arrow-up"></i></div>

    <script>
    // --- Utilities ---
    function showToast(message, timeout = 2500) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        clearTimeout(toast._t);
        toast._t = setTimeout(() => toast.classList.remove('show'), timeout);
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Loader
        const loader = document.getElementById('pageLoader');
        loader.classList.add('active');
        setTimeout(() => loader.classList.remove('active'), 900);

        // Simple replacements for demo buttons (no backend)
        document.getElementById('signInBtn').addEventListener('click', () => showToast('Sign-in is a demo. Feature coming soon.'));
        document.getElementById('signUpBtn').addEventListener('click', () => showToast('Sign-up is a demo. Feature coming soon.'));
        document.getElementById('startLearningBtn').addEventListener('click', () => {
            document.querySelector('#practice .quiz-section').scrollIntoView({behavior:'smooth'});
            showToast('Welcome to the Quick Math Quiz!');
        });
        document.getElementById('learnMoreBtn').addEventListener('click', () => showToast('Explore materials below.'));
        document.getElementById('signupCtaBtn').addEventListener('click', () => showToast('Sign-up flow not implemented in demo.'));

        // Contact form small validation
        const contactForm = document.querySelector('.form-container');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const messageInput = document.getElementById('message');

        function validateEmail(v) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
        }

        document.getElementById('submitContactBtn').addEventListener('click', (e) => {
            e.preventDefault();
            let ok = true;
            if (nameInput.value.trim() === '') { nameInput.nextElementSibling.style.display = 'block'; ok = false; }
            if (!validateEmail(emailInput.value.trim())) { emailInput.nextElementSibling.style.display = 'block'; ok = false; }
            if (messageInput.value.trim() === '') { messageInput.nextElementSibling.style.display = 'block'; ok = false; }
            if (!ok) { showToast('Please fix the highlighted fields.'); return; }
            // simulate submission
            loader.classList.add('active');
            setTimeout(() => {
                loader.classList.remove('active');
                showToast('Your message was sent. Thank you!');
                contactForm.reset();
                [nameInput,emailInput,messageInput].forEach(inp => inp.nextElementSibling.style.display='none');
            }, 900);
        });

        [nameInput,emailInput,messageInput].forEach(inp => {
            inp.addEventListener('input', () => { inp.nextElementSibling.style.display = 'none'; });
        });

        document.getElementById('cancelContactBtn').addEventListener('click', () => {
            contactForm.reset();
            showToast('Form cleared.');
        });
        document.getElementById('helpContactBtn').addEventListener('click', () => {
            showToast('Contact us at info@mathlab.id');
        });

        // Back to top & scroll progress
        const backToTop = document.getElementById('backToTop');
        const progressEl = document.querySelector('.scroll-progress');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 280) backToTop.classList.add('visible'); else backToTop.classList.remove('visible');
            const total = document.body.scrollHeight - window.innerHeight;
            const pct = total ? (window.pageYOffset / total) * 100 : 0;
            progressEl.style.width = pct + '%';
        });
        backToTop.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

        // --- Quiz Logic ---
        const startBtn = document.getElementById('startBtn');
        const nextBtn = document.getElementById('nextBtn');
        const restartBtn = document.getElementById('restartQuizBtn');
        const questionText = document.getElementById('questionText');
        const choicesContainer = document.getElementById('choicesContainer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const progressBar = document.getElementById('progressBar');

        const TOTAL_QUESTIONS = 8;
        let currentQ = 0;
        let score = 0;
        let correctAnswer = null;
        let isAnswered = false;

        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function makeQuestion() {
            // operations: +, -, *
            const ops = ['+','-','*'];
            const op = ops[randomInt(0, ops.length-1)];
            let a, b;
            if (op === '*') {
                a = randomInt(2, 12);
                b = randomInt(2, 10);
            } else {
                a = randomInt(1, 50);
                b = randomInt(1, 50);
            }
            let qText = `${a} ${op} ${b}`;
            let ans;
            switch(op) {
                case '+': ans = a + b; break;
                case '-': ans = a - b; break;
                case '*': ans = a * b; break;
            }
            return { text: qText, answer: ans };
        }

        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function renderQuestion() {
            isAnswered = false;
            nextBtn.disabled = true;
            const q = makeQuestion();
            correctAnswer = q.answer;
            currentQ++;
            questionText.textContent = `Q${currentQ}. What is ${q.text}?`;
            // prepare choices
            const choices = new Set();
            choices.add(correctAnswer);
            while (choices.size < 4) {
                // generate plausible wrong answers
                const variation = randomInt(1, 12);
                const sign = Math.random() > 0.5 ? 1 : -1;
                const candidate = correctAnswer + sign * variation;
                if (candidate !== correctAnswer && candidate >= -1000 && candidate <= 10000) choices.add(candidate);
            }
            const choicesArr = shuffleArray(Array.from(choices));
            choicesContainer.innerHTML = '';
            choicesArr.forEach(c => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = c;
                btn.setAttribute('type','button');
                btn.addEventListener('click', () => handleChoice(btn, c));
                choicesContainer.appendChild(btn);
            });

            // update progress
            const percent = Math.round(((currentQ-1) / TOTAL_QUESTIONS) * 100);
            progressBar.style.width = percent + '%';
        }

        function handleChoice(btn, value) {
            if (isAnswered) return;
            isAnswered = true;
            // mark buttons disabled
            const allBtns = choicesContainer.querySelectorAll('.choice-btn');
            allBtns.forEach(b => b.disabled = true);
            if (Number(value) === correctAnswer) {
                btn.classList.add('correct');
                score++;
                scoreDisplay.textContent = `Score: ${score}`;
                showToast('Correct! Nice job.', 1200);
            } else {
                btn.classList.add('wrong');
                // highlight correct answer
                allBtns.forEach(b => {
                    if (Number(b.textContent) === correctAnswer) b.classList.add('correct');
                });
                showToast(`Incorrect. Correct answer: ${correctAnswer}`, 2200);
            }
            nextBtn.disabled = false;
            // if last question, change nextBtn text to Finish
            if (currentQ >= TOTAL_QUESTIONS) nextBtn.textContent = 'Finish';
            else nextBtn.textContent = 'Next';
        }

        function startQuiz() {
            currentQ = 0; score = 0;
            scoreDisplay.textContent = `Score: ${score}`;
            renderQuestion();
            startBtn.disabled = true;
            nextBtn.disabled = true;
            showToast('Quiz started. Good luck!');
        }

        function nextQuestion() {
            if (!isAnswered && currentQ < TOTAL_QUESTIONS) {
                showToast('Please select an answer first.');
                return;
            }
            if (currentQ >= TOTAL_QUESTIONS) {
                // finish
                questionText.textContent = `Quiz finished. Your score: ${score} / ${TOTAL_QUESTIONS}`;
                choicesContainer.innerHTML = '';
                progressBar.style.width = '100%';
                startBtn.disabled = false;
                nextBtn.disabled = true;
                showToast(`Quiz completed. You scored ${score} of ${TOTAL_QUESTIONS}.`);
                return;
            }
            renderQuestion();
        }

        function restartQuiz() {
            currentQ = 0; score = 0;
            scoreDisplay.textContent = `Score: ${score}`;
            progressBar.style.width = '0%';
            questionText.textContent = 'Press Start to begin the quiz.';
            choicesContainer.innerHTML = '';
            startBtn.disabled = false;
            nextBtn.disabled = true;
            showToast('Quiz reset.');
        }

        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartQuiz);

        // Accessibility: allow Enter on choice selection when focused
        choicesContainer.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && document.activeElement.classList.contains('choice-btn')) {
                document.activeElement.click();
            }
        });

        // initial state
        restartQuiz();
    });
</script>
</body>
</html>